/*!CK:3452686701!*//*1439789258,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["JzHFw"]); }

__d("SidebarType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SIDEBAR:"sidebar",MINI_SIDEBAR:"mini_sidebar",BUDDYLIST:"buddylist"};},null,{});
__d('ChatQuietLinks',['Event','DOM','UserAgent_DEPRECATED','DataStore','Parent'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m={},n={silenceLinks:function(r){o(r,this.removeEmptyHrefs.bind(this));},nukeLinks:function(r){o(r,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(r){p(r,function(s){return !s||s==='#';});},removeAllHrefs:function(r){p(r);}};function o(r,s){var t=!!j.chrome(),u=!!j.chrome()||j.ie()>=9||j.firefox()>=4;if(m[i.getID(r)])return;m[i.getID(r)]=true;if(!u)return;if(!t){s&&s(r);return;}h.listen(r,'mouseover',function v(w){var x=l.byTag(w.getTarget(),'a');if(x){var y=x.getAttribute('href');if(q(y)){k.set(x,'stashedHref',x.getAttribute('href'));x.removeAttribute('href');}}});h.listen(r,'mouseout',function v(w){var x=l.byTag(w.getTarget(),'a'),y=x&&k.remove(x,'stashedHref');if(q(y))x.setAttribute('href',y);});h.listen(r,'mousedown',function(v){if(!v.isDefaultRequested())return true;var w=l.byTag(v.getTarget(),'a'),x=w&&k.get(w,'stashedHref');if(q(x))w.setAttribute('href',x);});}function p(r,s){var t=i.scry(r,'a');if(s)t=t.filter(function(u){return s(u.getAttribute('href'));});t.forEach(function(u){u.removeAttribute('href');u.setAttribute('tabindex',0);});}function q(r){return r&&r!=='#';}f.exports=n;},null);
__d('TooltipMixin',['React','TooltipData','DOM'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes;function l(n){var o=n.tooltip;return o!=null&&typeof o!=='string';}var m={propTypes:{tooltip:k.oneOfType([k.element,k.string]),position:k.oneOf(['above','below','left','right']),alignH:k.oneOf(['left','center','right'])},getInitialState:function(){return {tooltipContainer:l(this.props)?j.create('div'):null};},componentWillReceiveProps:function(n){var o=l(n),p=this.state.tooltipContainer;if(p&&!o){this.setState({tooltipContainer:null});}else if(!p&&o)this.setState({tooltipContainer:j.create('div')});},componentDidMount:function(){this._updateTooltip();},componentDidUpdate:function(n,o){if(o.tooltipContainer&&!this.state.tooltipContainer)this._cleanupContainer(o.tooltipContainer);this._updateTooltip();},_updateTooltip:function(){var n;if(l(this.props)){n=this.state.tooltipContainer;h.render(this.props.tooltip,n);}else n=this.props.tooltip;if(n!=null){i.set(h.findDOMNode(this),n,this.props.position,this.props.alignH);}else i.remove(h.findDOMNode(this));},componentWillUnmount:function(){if(this.state.tooltipContainer)this._cleanupContainer(this.state.tooltipContainer);i.remove(h.findDOMNode(this));},_cleanupContainer:function(n){h.unmountComponentAtNode(n);}};f.exports=m;},null);
__d('TooltipLink.react',['React','TooltipMixin'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'TooltipLink',mixins:[i],render:function(){return h.createElement('a',this.props,this.props.children);}});f.exports=j;},null);
__d('WebMessengerEvents',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=Object.assign(new h(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(i.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(i.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(i.FOCUS_COMPOSER);},focusSearch:function(){this.inform(i.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(i.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(j){this.inform(i.UPDATE_SELECTION,j);},stickerClicked:function(j,k){this.inform(i.STICKER_CLICKED,{packID:j,stickerID:k});},submitReply:function(){this.inform(i.SUBMIT_REPLY);}});f.exports=i;},null);
__d('WebMessengerSubscriptionsHandler',['SubscriptionsHandler'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=new h('webmessenger');f.exports=i;},null);
__d("isWebMessengerURI",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return (/^(\/messages)/.test(i.getPath()));}f.exports=h;},null);
__d('WebMessengerWidthControl',['Arbiter','BlueBar','CSS','CSSClassTransition','DOMDimensions','Event','Style','URI','ViewportBounds','WebMessengerEvents','WebMessengerSubscriptionsHandler','$','cx','isWebMessengerURI','requestAnimationFrame','setTimeoutAcrossTransitions','shield','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z=205,aa=981,ba=257,ca=18,da=848,ea=724,fa=.57,ga=56,ha,ia,ja;function ka(pa,qa,ra){this.masterChanged=pa;this.detailChaned=qa;r.addSubscriptions(m.listen(window,'resize',y(x(la,this,this),100)),h.subscribe(['sidebar/initialized','sidebar/show','sidebar/hide','minisidebar/show'],x(la,this,this),h.SUBSCRIBE_NEW));var sa=oa()?ga:0;if(ra)sa=z;this._width=oa()?0:da;ja=true;la(this,sa);}function la(pa,qa){var ra=p.getRight()+p.getLeft();ra=ra||qa||0;var sa=l.getViewportWithoutScrollbarDimensions().width-ra,ta=Math.round(Math.max(0,sa/2-aa/2));sa=aa+ta-ba;sa-=ca;sa=Math.max(ea,Math.min(da,sa));if(!isNaN(sa)&&pa._width!==sa){pa._width=sa;var ua=Math.round(sa/(1+fa)),va=sa-ua;pa.masterChanged(va);pa.detailChaned(ua);if(oa()){var wa=sa+ba;ma(function(){if(ia){document.body.className=ia;ia='';}na(wa+'px');j.removeClass(document.body,"_5uj5");ja&&q.detailDOMChanged();ja=false;},ia);}}}function ma(pa,qa){qa&&j.addClass(document.documentElement,"_5uj6");v(pa);qa&&w(j.removeClass.bind(null,document.documentElement,"_5uj6"),1000);}function na(pa){n.set(i.getNavRoot(),'width',pa);n.set(s('globalContainer'),'width',pa);}function oa(){if(!ha)ha=j.hasClass(document.body,"_6nw");return ha;}k.registerHandler(function(pa,qa,ra,sa){function ta(ua){return oa()&&u(new o(ua));}if(ta(sa)){ia=qa;return true;}else if(ta(ra)){ma(function(){pa.className=qa;na('');},true);return true;}});f.exports=ka;},null);
__d('Dock',['Event','shield','Arbiter','ArbiterMixin','BlueBar','ChatQuietLinks','CSS','DataStore','DOM','Parent','Scroll','Style','Toggler','Vector','csx','emptyFunction','WebMessengerWidthControl'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();c('WebMessengerWidthControl');function x(){}Object.assign(x,k,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(y){this.init=w;this.rootEl=y;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();m.removeEmptyHrefs(this.rootEl);h.listen(y,'click',this._onClick.bind(this));h.listen(window,'resize',this._onWindowResize.bind(this));t.subscribe(['show','hide'],(function(z,aa){var ba=aa.getActive();if(!p.contains(y,ba))return;if(n.hasClass(ba,'fbNub')){this.notifyNub(ba,z);if(z==='show')this._resizeNubFlyout(ba);}else{var ca=q.byClass(ba,'fbNubFlyout');if(ca)n.conditionClass(ca,'menuOpened',z==='show');}}).bind(this));this.inform('init',{},j.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return this.viewportDimensions=u.getViewportDimensions();},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+u.getElementDimensions(this.rootEl).y;var y=l.getBar();if(y){var z=s.isFixed(y)?'viewport':'document';this.flyoutHeightOffset+=u.getElementPosition(y,z).y+u.getElementDimensions(y).y;}},toggle:function(y){var z=this._findFlyout(y);if(!z)return;this.subscribe('init',function(){t.toggle(y);});},show:function(y){this.subscribe('init',function(){t.show(y);});},showNub:function(y){n.show(y);},hide:function(y){this.subscribe('init',function(){var z=t.getInstance(y);p.contains(y,z.getActive())&&z.hide();});},hideNub:function(y){n.hide(y);this.hide(y);},setUseMaxHeight:function(y,z){n.conditionClass(y,'maxHeight',z!==false);this._resizeNubFlyout(y);},_resizeNubFlyout:function(y){var z=this._findFlyout(y);if(!z||n.hasClass(y,'placeholder')||!(n.hasClass(y,'openToggler')||n.hasClass(y,'opened')))return;var aa=p.find(z,'div.fbNubFlyoutOuter'),ba=p.find(aa,'div.fbNubFlyoutInner'),ca=p.find(ba,'div.fbNubFlyoutBody'),da=r.getTop(ca),ea=ca.offsetHeight;s.set(ca,'height','auto');var fa=u.getElementDimensions(z),ga=u.getElementDimensions(ca),ha=this.getMaxFlyoutHeight(y);s.set(z,'max-height',ha+'px');s.set(aa,'max-height',ha+'px');fa=u.getElementDimensions(z);var ia=u.getElementDimensions(ba),ja=ia.y-ga.y,ka=fa.y-ja,la=parseInt(ca.style.height||ca.clientHeight,10),ma=ka!==la;if(fa.y>ja&&ma)s.set(ca,'height',ka+'px');n.removeClass(z,'swapDirection');var na=u.getElementPosition(z).x;n.conditionClass(z,'swapDirection',(function(){if(na<0)return true;return na+fa.x>this.viewportDimensions.x;}).bind(this)());if(ma&&da+ea>=ga.y){r.setTop(ca,ca.scrollHeight);}else r.setTop(ca,da);this.notifyNub(y,'resize');},getMaxFlyoutHeight:function(y){var z=this._findFlyout(y),aa=u.getElementPosition(z,'viewport'),ba=u.getElementDimensions(z),ca=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-aa.y-ba.y);return Math.max(ca,0);},resizeAllFlyouts:function(){var y=this._getAllNubs(),z=y.length;while(z--)this._resizeNubFlyout(y[z]);},hideAllFlyouts:function(){var y=this._getAllNubs(),z=y.length;while(z--)this.hide(y[z]);},_getAllNubs:function(){var y=p.scry(this.rootEl,"div._50-v.openToggler");return y.concat(p.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var y=event.getTarget(),z=q.byClass(y,'fbNub');if(z){if(q.byClass(y,'fbNubFlyoutTitlebar')){var aa=q.byTag(y,'a'),ba=y.nodeName=='INPUT'&&y.getAttribute('type')=='submit';if(!aa&&!ba){this.hide(z);return false;}}this.notifyNub(z,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(y){return n.hasClass(y,'fbNubFlyout')?y:p.scry(y,'div.fbNubFlyout')[0]||null;},registerNubController:function(y,z){o.set(y,'dock:nub:controller',z);z.subscribe('nub/button/content-changed',i(this.inform,this,'resize',y));z.subscribe('nub/flyout/content-changed',i(this._resizeNubFlyout,this,y));},unregisterNubController:function(y){o.remove(y,'dock:nub:controller');},notifyNub:function(y,z,aa){var ba=o.get(y,'dock:nub:controller');ba&&ba.inform(z,aa);}});f.exports=b.Dock||x;},null);
__d('PureStoreBasedStateMixin',['StoreBasedStateMixinHelper','invariant','setImmediate'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();'use strict';var k=(function(){for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];return {getInitialState:function(){return this.constructor.calculateState();},componentWillMount:function(){!this.constructor.calculateState?i(0):undefined;this._recalculateStateID=null;var o=(function(){if(this.isMounted())this.setState(this.constructor.calculateState());this._recalculateStateID=null;}).bind(this);this._mixin=new h(m);this._mixin.subscribeCallback((function(){if(this._recalculateStateID===null)this._recalculateStateID=j(o);}).bind(this));},componentWillUnmount:function(){this._mixin.release();this._mixin=null;}};}).bind(this);f.exports=k;},null);
__d('keyMirrorRecursive',['invariant'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();'use strict';function i(l,m){return j(l,m);}function j(l,m){var n={},o;!k(l)?h(0):undefined;for(o in l){if(!l.hasOwnProperty(o))continue;var p=l[o],q=m?m+'.'+o:o;if(k(p)){p=j(p,q);}else p=q;n[o]=p;}return n;}function k(l){return l instanceof Object&&!Array.isArray(l);}f.exports=i;},null);
__d('mergeDeepInto',['invariant','mergeHelpers'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();'use strict';var j=i.ArrayStrategies,k=i.checkArrayStrategy,l=i.checkMergeArrayArgs,m=i.checkMergeLevel,n=i.checkMergeObjectArgs,o=i.isTerminal,p=i.normalizeMergeArg,q=function(u,v,w,x){n(u,v);m(x);var y=v?Object.keys(v):[];for(var z=0;z<y.length;z++){var aa=y[z];s(u,v,aa,w,x);}},r=function(u,v,w,x){l(u,v);m(x);var y=Math.max(u.length,v.length);for(var z=0;z<y;z++)s(u,v,z,w,x);},s=function(u,v,w,x,y){var z=v[w],aa=v.hasOwnProperty(w),ba=aa&&o(z),ca=aa&&Array.isArray(z),da=aa&&!ca&&!ca,ea=u[w],fa=u.hasOwnProperty(w),ga=fa&&o(ea),ha=fa&&Array.isArray(ea),ia=fa&&!ha&&!ha;if(ga){if(ba){u[w]=z;}else if(ca){u[w]=[];r(u[w],z,x,y+1);}else if(da){u[w]={};q(u[w],z,x,y+1);}else if(!aa)u[w]=ea;}else if(ha){if(ba){u[w]=z;}else if(ca){!j[x]?h(0):undefined;if(x===j.Clobber)ea.length=0;r(ea,z,x,y+1);}else if(da){u[w]={};q(u[w],z,x,y+1);}else !aa;}else if(ia){if(ba){u[w]=z;}else if(ca){u[w]=[];r(u[w],z,x,y+1);}else if(da){q(ea,z,x,y+1);}else !aa;}else if(!fa)if(ba){u[w]=z;}else if(ca){u[w]=[];r(u[w],z,x,y+1);}else if(da){u[w]={};q(u[w],z,x,y+1);}else !aa;},t=function(u,v,w){var x=p(v);k(w);q(u,x,w,0);};f.exports=t;},null);
__d('mergeDeep',['mergeHelpers','mergeDeepInto'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();'use strict';var j=h.checkArrayStrategy,k=h.checkMergeObjectArgs,l=h.normalizeMergeArg,m=function(n,o,p){var q=l(n),r=l(o);k(q,r);j(p);var s={};i(s,q,p);i(s,r,p);return s;};f.exports=m;},null);
__d('ReactComponentRenderer',['React','Object.assign','warning'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();'use strict';function k(l,m){this.klass=l;this.container=m;this.props={};this.component=null;}k.prototype.replaceProps=function(l,m){this.props={};this.setProps(l,m);};k.prototype.setProps=function(l,m){if(this.klass==null)return;i(this.props,l);var n=h.createElement(this.klass,this.props);this.component=h.render(n,this.container,m);};k.prototype.unmount=function(){h.unmountComponentAtNode(this.container);this.klass=null;};f.exports=k;},null);
__d('MercuryDelayedDispatcher',['MercuryDispatcher','MercuryServerPayloadPreprocessor','MercuryServerRequests','MercurySingletonMixin','MercuryThreadIDMap'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();'use strict';function m(n){this.$MercuryDelayedDispatcher1=n;this.$MercuryDelayedDispatcher2=[];this.$MercuryDelayedDispatcher3=l.getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4=h.getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher5=j.getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher6=i.getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4.subscribe('model-update-completed',(function(o,p){return this.$MercuryDelayedDispatcher7();}).bind(this));}m.prototype.handleUpdateWaitForThread=function(n,o){var p=this.$MercuryDelayedDispatcher3.getClientIDFromFBIDNow(o);if(p){this.$MercuryDelayedDispatcher8(n);return;}this.$MercuryDelayedDispatcher3.getClientIDFromFBID(o,(function(){return this.$MercuryDelayedDispatcher2.push(n);}).bind(this));this.$MercuryDelayedDispatcher5.ensureThreadIsFetched(o);};m.prototype.$MercuryDelayedDispatcher7=function(){if(this.$MercuryDelayedDispatcher2&&this.$MercuryDelayedDispatcher2.length){var n=this.$MercuryDelayedDispatcher2[0];this.$MercuryDelayedDispatcher2=this.$MercuryDelayedDispatcher2.slice(1);this.$MercuryDelayedDispatcher8(n);}};m.prototype.$MercuryDelayedDispatcher8=function(n){if(n.from_client){this.$MercuryDelayedDispatcher4.handleUpdate(n);}else this.$MercuryDelayedDispatcher6.handleUpdate(n);};Object.assign(m,k);f.exports=m;},null);
__d('MercuryChannelHandler',['Arbiter','ChannelConstants','MercuryActionType','MercuryDelayedDispatcher','MercuryGlobalActionType','MercuryMessages','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercurySingletonMixin','MercuryThreadInformer','MercuryViewer','MessagingEvent','MessagingReliabilityLogger','MessagingTag','PresenceUtil','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=Object.assign||function(ba){for(var ca=1;ca<arguments.length;ca++){var da=arguments[ca];for(var ea in da)if(Object.prototype.hasOwnProperty.call(da,ea))ba[ea]=da[ea];}return ba;},y,z;y=w(p);z=y&&y.prototype;Object.assign(aa,y);aa.prototype=Object.create(y.prototype);aa.prototype.constructor=aa;aa.__superConstructor__=y;function aa(ba){'use strict';z.constructor.call(this);this.$MercuryChannelHandler1=ba;this.__payloadPreprocessor=o.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler2=q.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler3=m.getForFBID(this.$MercuryChannelHandler1);this.__delayedDispatcher=k.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler4=[];}aa.prototype.getInstanceFBID=function(){'use strict';return this.$MercuryChannelHandler1;};aa.prototype.$MercuryChannelHandler5=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!ca.obj.message){t.addEntry('channel_receive','invalid_data');return;}var da=ca.obj.message,ea=da.other_user_fbid?da.other_user_fbid:da.thread_fbid,fa={author:da.mercury_author_id,author_email:da.mercury_author_email,body:da.body,subject:da.subject,has_attachment:da.has_attachment,attachments:da.attachments,html_body:da.html_body,thread_id:da.tid,thread_fbid:da.thread_fbid,other_user_fbid:da.other_user_fbid,offline_threading_id:da.offline_threading_id,message_id:da.mid,is_spoof_warning:da.is_spoof_warning,ranges:da.ranges,source:da.mercury_source,source_tags:da.mercury_source_tags,threading_id:da.threading_id,timestamp:da.timestamp,timestamp_absolute:da.timestamp_absolute,timestamp_relative:da.timestamp_relative,timestamp_time_passed:da.timestamp_time_passed,action_type:j.USER_GENERATED_MESSAGE,is_unread:da.is_unread,is_forward:false,forward_count:da.forward_count||da.forward,forward_message_ids:da.forward_msg_ids,folder:ca.obj.folder};if("sync_id" in da){fa.sync_id=da.sync_id;}else fa.action_id=da.action_id;var ga=[x({},fa)];ga=ga.concat(da.forward_actions||[]);var ha=n.CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:ga,payload_source:ha},ea);if(!da.is_unread&&r.isViewer(da.mercury_author_id)){var ia={};ia[ea]=ca.obj.folder;this.$MercuryChannelHandler7(this.__getMessagingPayloadType(),{obj:{event:s.READ,thread_fbids:da.thread_fbid?[da.thread_fbid]:[],other_user_fbids:da.other_user_fbid?[da.other_user_fbid]:[],folder_info:ia,timestamp:da.timestamp}});}t.addEntry('channel_receive','success',[ea,fa.message_id,v.getSessionID()]);};aa.prototype.$MercuryChannelHandler8=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj.other_user_fbid&&!ca.obj.thread_fbid)return;this.__payloadPreprocessor.handleUpdate({delivery_receipts:[{other_user_fbid:ca.obj.other_user_fbid||'',thread_fbid:ca.obj.thread_fbid||'',time:ca.obj.timestamp}]});};aa.prototype.$MercuryChannelHandler7=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!ca.obj.thread_fbids&&!ca.obj.other_user_fbids)return;var da=[],ea=ca.obj.event==s.READ;(ca.obj.thread_fbids||[]).forEach(function(fa){da.push({action_type:j.CHANGE_READ_STATUS,action_id:null,thread_fbid:fa,mark_as_read:ea,timestamp:ca.obj.timestamp||0,folder:ca.obj.folder_info[fa]});});(ca.obj.other_user_fbids||[]).forEach(function(fa){da.push({action_type:j.CHANGE_READ_STATUS,action_id:null,other_user_fbid:fa,mark_as_read:ea,timestamp:ca.obj.timestamp||0,folder:ca.obj.folder_info[fa]});});this.__payloadPreprocessor.handleUpdate({actions:da,payload_source:n.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler9=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!(ca.obj.thread_fbids||ca.obj.other_user_fbids))return;var da=[];(ca.obj.thread_fbids||[]).forEach(function(ea){da.push({action_type:j.DELETE_THREAD,action_id:null,thread_fbid:ea});});(ca.obj.other_user_fbids||[]).forEach(function(ea){da.push({action_type:j.DELETE_THREAD,action_id:null,other_user_fbid:ea});});this.__payloadPreprocessor.handleUpdate({actions:da,payload_source:n.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler10=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!ca.obj.thread_fbids&&!ca.obj.other_user_fbids||!ca.obj.mids)return;var da=ca.obj.thread_fbids.length?ca.obj.thread_fbids[0]:null,ea=ca.obj.other_user_fbids.length?ca.obj.other_user_fbids[0]:null,fa={action_type:j.DELETE_MESSAGES,action_id:null,thread_fbid:da,other_user_fbid:ea,message_ids:ca.obj.mids};this.__payloadPreprocessor.handleUpdate({actions:[fa],threads:[ca.obj.updated_thread],payload_source:n.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler11=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!ca.obj.folder)return;var da={action_type:l.MARK_ALL_READ,action_id:ca.obj.action_id,folder:ca.obj.folder};this.__payloadPreprocessor.handleUpdate({global_actions:[da]});};aa.prototype.$MercuryChannelHandler12=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj.thread_fbids&&!ca.obj.other_user_fbids)return;var da=n.CLIENT_CHANNEL_MESSAGE;(ca.obj.thread_fbids||[]).forEach(function(ea){var fa={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:ea,other_user_fbid:null,archived:ca.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[x({},fa)],payload_source:da},ea);},this);(ca.obj.other_user_fbids||[]).forEach(function(ea){var fa={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_user_fbid:ea,archived:ca.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[x({},fa)],payload_source:da},ea);},this);};aa.prototype.$MercuryChannelHandler13=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj.thread_fbids&&!ca.obj.other_user_fbids)return;var da=n.CLIENT_CHANNEL_MESSAGE,ea;(ca.obj.thread_fbids||[]).forEach(function(fa){if(ca.obj.event==s.TAG){ea=ca.obj.tag;}else ea=ca.obj.marked_as_spam?u.SPAM:u.INBOX;var ga={action_type:j.CHANGE_FOLDER,action_id:null,thread_fbid:fa,other_user_fbid:null,new_folder:ea};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[x({},ga)],payload_source:da},fa);},this);(ca.obj.other_user_fbids||[]).forEach(function(fa){if(ca.obj.event==s.TAG){ea=ca.obj.tag;}else ea=ca.obj.marked_as_spam?u.SPAM:u.INBOX;var ga={action_type:j.CHANGE_FOLDER,action_id:null,other_user_fbid:fa,thread_fbid:null,new_folder:ea};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[x({},ga)],payload_source:da},fa);},this);};aa.prototype.$MercuryChannelHandler14=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj.tag)return;switch(ca.obj.tag){case u.ACTION_ARCHIVED:this.$MercuryChannelHandler12(ba,ca);break;case u.INBOX:case u.OTHER:this.$MercuryChannelHandler13(ba,ca);break;}};aa.prototype.__markAsSeen=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler15(ba)||!ca.obj||!ca.obj.seen_timestamp)return;this.__payloadPreprocessor.handleUpdate({message_counts:[{seen_timestamp:ca.obj.seen_timestamp,folder:u.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:u.INBOX}],payload_source:n.CLIENT_CHANNEL_MESSAGE});};aa.prototype.__updateModelsFromMercuryPayload=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler16(ba)||!ca.obj)return;this.$MercuryChannelHandler2.synchronizeInforms((function(){var da=ca.obj,ea=[];(da.actions||[]).forEach(function(fa){var ga=j.USER_GENERATED_MESSAGE;if(fa.action_type==j.LOG_MESSAGE){var ha=n.CLIENT_CHANNEL_MESSAGE,ia;ia=fa.other_user_fbid||fa.thread_fbid;this.__delayedDispatcher.handleUpdateWaitForThread({actions:[x({},fa)],payload_source:ha},ia);}else if(fa.action_type!=ga)ea.push(fa);},this);da.actions=ea;da.payload_source=n.CLIENT_CHANNEL_MESSAGE;this.__payloadPreprocessor.handleUpdate(da);}).bind(this));};aa.prototype.$MercuryChannelHandler17=function(ba,ca){'use strict';var da,ea,fa=ca.obj.time,ga=ca.obj.reader,ha=ca.obj.thread_fbid||'';this.__payloadPreprocessor.handleUpdate({roger:(ea={},ea[ha]=(da={},da[ga]=fa,da),ea)});};aa.prototype.$MercuryChannelHandler18=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||ca.obj.message_blocked===undefined||!ca.obj.thread_fbid)return;var da=j.UPDATE_BLOCKER_STATUS,ea=[{action_type:da,action_id:null,thread_fbid:ca.obj.thread_fbid,message_blocked:ca.obj.message_blocked,is_blocked_by_recipient:ca.obj.is_blocked_by_recipient}];this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:n.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler19=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||ca.obj.got_blocked===undefined||!ca.obj.thread_fbid)return;var da=j.UPDATE_BLOCKEE_STATUS,ea=[{action_type:da,action_id:null,thread_fbid:ca.obj.thread_fbid,got_blocked:ca.obj.got_blocked}];this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:n.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler20=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||ca.obj.mute_settings===undefined||!ca.obj.thread_fbid&&!ca.obj.other_user_fbid)return;var da=j.CHANGE_MUTE_SETTINGS,ea=[{action_type:da,action_id:null,thread_fbid:ca.obj.thread_fbid,other_user_fbid:ca.obj.other_user_fbid,mute_settings:ca.obj.mute_settings}];this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:n.CLIENT_CHANNEL_MESSAGE});};aa.prototype.__handleMessagingPayload=function(ba,ca){'use strict';switch(ca.obj.event){case s.DELIVER:this.$MercuryChannelHandler5(ba,ca);break;case s.DELIVERY_RECEIPT:this.$MercuryChannelHandler8(ba,ca);break;case s.READ:case s.UNREAD:this.$MercuryChannelHandler7(ba,ca);break;case s.READ_ALL:this.$MercuryChannelHandler11(ba,ca);break;case s.DELETE:this.$MercuryChannelHandler9(ba,ca);break;case s.DELETE_MESSAGES:this.$MercuryChannelHandler10(ba,ca);break;case s.TAG:this.$MercuryChannelHandler14(ba,ca);break;case s.REPORT_SPAM:this.$MercuryChannelHandler13(ba,ca);break;case s.READ_RECEIPT:this.$MercuryChannelHandler17(ba,ca);break;case s.CHANGE_MUTE_SETTINGS:this.$MercuryChannelHandler20(ba,ca);break;case s.UPDATE_BLOCKER_STATUS:this.$MercuryChannelHandler18(ba,ca);break;case s.UPDATE_BLOCKEE_STATUS:this.$MercuryChannelHandler19(ba,ca);break;}};aa.prototype.getRouting=function(){'use strict';return {mercury:this.__updateModelsFromMercuryPayload,messaging:this.__handleMessagingPayload,inbox:this.__markAsSeen};};aa.prototype.__getMessagingPayloadType=function(){'use strict';return i.getArbiterType('messaging');};aa.prototype.__getMercuryPayloadType=function(){'use strict';return i.getArbiterType('mercury');};aa.prototype.__getInboxPayloadType=function(){'use strict';return i.getArbiterType('inbox');};aa.prototype.$MercuryChannelHandler6=function(ba){'use strict';return ba==this.__getMessagingPayloadType();};aa.prototype.$MercuryChannelHandler16=function(ba){'use strict';return ba==this.__getMercuryPayloadType();};aa.prototype.$MercuryChannelHandler15=function(ba){'use strict';return ba==this.__getInboxPayloadType();};aa.prototype.turnOn=function(){'use strict';if(!this.$MercuryChannelHandler4.length){var ba=this.getRouting();for(var ca in ba)this.$MercuryChannelHandler4.push(h.subscribe(i.getArbiterType(ca),ba[ca].bind(this)));}return this;};aa.prototype.turnOff=function(){'use strict';if(this.$MercuryChannelHandler4.length){this.$MercuryChannelHandler4.forEach(h.unsubscribe);this.$MercuryChannelHandler4=[];}return this;};Object.assign(aa,p);f.exports=aa;},null);
__d('SoundPlayer',['Arbiter','Flash','URI','createArrayFromMixed'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={},m=null,n=false,o='so_sound_player',p='/swf/SoundPlayer.swf?v=1',q=null;function r(z){var aa=new j(z);if(!aa.getDomain())return new j(window.location.href).setPath(aa.getPath()).toString();return z;}function s(z){var aa=new j(z).getPath();if(/\.mp3$/.test(aa))return 'audio/mpeg';if(/\.og[ga]$/.test(aa))return 'audio/ogg';return '';}function t(){if(!q){var z=document.createElement('audio');if(!z||!z.canPlayType)return null;z.setAttribute('preload','auto');document.body.appendChild(z);q=z;}return q;}function u(){var z=document[o]||window[o];if(z)if(!z.playSound&&z.length)z=z[0];return z&&z.playSound&&z.loopSound?z:null;}function v(){return n;}function w(z,aa,ba){m={path:z,sync:aa,loop:ba};}function x(){n=true;if(m){var z=u();if(m.loop){z.loopSound(m.path,m.sync);}else z.playSound(m.path,m.sync);}}var y={init:function(z){z=k(z);var aa;for(var ba=0;ba<z.length;++ba){aa=z[ba];if(l[aa])return;}var ca=t();for(ba=0;ca&&ba<z.length;++ba){aa=z[ba];if(ca.canPlayType(aa)){l[aa]=true;return;}}l['audio/mpeg']=true;if(u())return;try{h.registerCallback(x,['sound/player_ready','sound/ready']);var ea=document.createElement('div');ea.id='sound_player_holder';document.body.appendChild(ea);var fa=window[o]=i.embed(p,ea,{allowscriptaccess:'always',wmode:'transparent'},{swf_id:o});fa.setAttribute('id',o);fa.setAttribute('width','1px');fa.setAttribute('height','1px');h.inform('sound/player_ready');}catch(da){}},play:function(z,aa){z=k(z);var ba=t(),ca,da;for(var ea=0;ba&&ea<z.length;++ea){ca=z[ea];da=s(ca);if(!ba.canPlayType(da))continue;y.init([da]);ba.src=r(ca);if(aa){ba.setAttribute('loop','');}else ba.removeAttribute('loop');ba.play();return;}for(ea=0;ea<z.length;++ea){ca=r(z[ea]);da=s(ca);if(da!='audio/mpeg')continue;y.init([da]);var fa=u();if(!v()){w(ca,true,aa);return;}else if(fa){if(aa){fa.loopSound(ca,true);}else fa.playSound(ca,true);return;}}},stop:function(z){z=k(z);for(var aa=0;aa<z.length;++aa){var ba=r(z[aa]),ca=t(),da=u();if(ca&&ca.src==ba){ca.pause();ca.removeAttribute('src');}else da&&da.stopSound(ba);}}};f.exports=y;},null);
__d('SoundSynchronizer',['SoundPlayer','WebStorage','createArrayFromMixed'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='fb_sounds_playing3';function l(){var p=i.getLocalStorage();if(p)try{var r=p[k];if(r){r=JSON.parse(r);if(Array.isArray(r))return r;}}catch(q){}return [];}function m(p){var q=i.getLocalStorage();if(q){var r=l();r.push(p);while(r.length>5)r.shift();try{q[k]=JSON.stringify(r);}catch(s){}}}function n(p){return l().some(function(q){return q===p;});}var o={play:function(p,q,r){p=j(p);q=q||p[0]+Math.floor(Date.now()/1000);if(n(q))return;h.play(p,r);m(q);},isSupported:function(){return !!i.getLocalStorage();}};f.exports=o;},null);
__d('SoundRPC',['Event','SoundSynchronizer'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(l,m,n){i.play(l,m,n);}var k={playLocal:j,playRemote:function(l,m,n,o){var p={paths:m,sync:n,loop:o};l.postMessage(JSON.stringify(p),'*');},supportsRPC:function(){return !!window.postMessage;},_listen:function(){h.listen(window,'message',function(l){if(!/\.facebook.com$/.test(l.origin))return;var m=JSON.parse(l.data||'{}');j(m.paths,m.sync,m.loop);});}};f.exports=k;},null);