/*!CK:796894181!*//*1439789255,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["dW2Am"]); }

__d('UFIReactionIcon.react',['React','UFIReactionTypes','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m,n=h.PropTypes;l=h.Component;m=l&&l.prototype;Object.assign(o,l);o.prototype=Object.create(l.prototype);o.prototype.constructor=o;o.__superConstructor__=l;function o(p,q){'use strict';m.constructor.call(this);}o.prototype.render=function(){'use strict';var p=k("_2d1t"+(this.props.size==='tiny'?' '+"_2d1w":'')+(this.props.size==='16'?' '+"_1fxb":'')+(this.props.size==='small'?' '+"_2d1x":'')+(this.props.size==='medium'?' '+"_2d1y":''),i.reactions[this.props.reaction].name,this.props.className);return h.createElement('i',{className:p});};o.propTypes={className:n.string,reaction:n.number.isRequired,size:n.oneOf(['tiny','16','small','medium'])};o.defaultProps={className:null,size:'small'};f.exports=o;},null);
__d('UFIReactionsDialogLayer.react',['AccessibleLayer','BrowserSupport','ContextualDialog','ContextualDialogArrow','ContextualLayerAutoFlip','CSS','LayerRefocusOnHide','ReactLayer','ReactTransitionEvents','SubscriptionsHandler','cx','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t="_2r6j",u="_2r6k",v=i.hasCSSAnimations();function w(y){'use strict';this.layer=y;this.onHideEnd=this.onHideEnd.bind(this);this.onShowEnd=this.onShowEnd.bind(this);this.handler=new q();}w.prototype.onHideEnd=function(){'use strict';var y=this.layer.getContentRoot();p.removeEndEventListener(y,this.onHideEnd);s((function(){m.removeClass(y,u);this.layer.finishHide();}).bind(this));};w.prototype.onShowEnd=function(){'use strict';var y=this.layer.getContentRoot();p.removeEndEventListener(y,this.onShowEnd);s(function(){m.removeClass(y,t);});};w.prototype.enable=function(){'use strict';var y=this.layer.getContentRoot();this.handler.addSubscriptions(this.layer.subscribe('beforeshow',(function(){p.addEndEventListener(y,this.onShowEnd);m.addClass(y,t);}).bind(this)),this.layer.subscribe('starthide',(function(){p.addEndEventListener(y,this.onHideEnd);m.addClass(y,u);return false;}).bind(this)));};w.prototype.disable=function(){'use strict';this.handler.release();var y=this.layer.getContentRoot();p.removeEndEventListener(y,this.onHideEnd);p.removeEndEventListener(y,this.onShowEnd);};var x=o.createClass({createLayer:function(y){var z=new j({addedBehaviors:this.enumerateBehaviors({ContextualLayerAutoFlip:l,UFIReactionsDialogLayerTransition:v?w:null}),context:this.props.context,displayName:'UFIReactionsDialog',position:'above',shouldSetARIAProperties:false,theme:{wrapperClassName:"_2r6l"}},y);z.disableBehavior(h);z.disableBehavior(k);z.disableBehavior(n);z.conditionShow(this.props.shown);var aa=new q();aa.addSubscriptions(z.subscribe('mouseenter',this.props.onMouseEnter),z.subscribe('mouseleave',this.props.onMouseLeave),z.subscribe('destroy',function(){aa.release();}));return z;},receiveProps:function(y,z){this.layer.conditionShow(y.shown);}});f.exports=x;},null);
__d('UFIReactionsFacepile.react',['ActorURI','HovercardLink','React','Image.react','UFIClassNames','UFIReactionIcon.react','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController','XUFIReactionTooltipController','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u=12,v=32;s=j.Component;t=s&&s.prototype;Object.assign(w,s);w.prototype=Object.create(s.prototype);w.prototype.constructor=w;w.__superConstructor__=s;function w(x,y){'use strict';t.constructor.call(this);this.state={};}w.prototype.renderFacepile=function(){'use strict';var x=this.props.feedback.reactorids;if(this.props.feedback.reactioncount>u)x=x.slice(0,u-1);return x.map((function(y){y=this.props.authorProfiles[y];var z=i.constructEndpointWithLocation(y,'ufi');return (j.createElement('a',{'aria-label':y.name,className:"_51km _2ar2",'data-hovercard':z,href:y.uri,key:'reactor-'+y.id,position:'above'},j.createElement(k,{height:32,src:y.thumbSrc,width:32}),j.createElement('div',{className:"_2ar3"},j.createElement(m,{size:'small',reaction:this.props.feedback.userreactions[y.id]}))));}).bind(this));};w.prototype.renderMoreLink=function(){'use strict';if(this.props.feedback.reactioncount<=u)return null;var x=this.props.feedback.reactorids,y=this.props.authorProfiles[x[u-1]],z=this.props.feedback.reactioncountreduced;if(!isNaN(z))z='+'+(this.props.feedback.reactioncount-u+1);var aa=p.getURIBuilder().setIntVector('seen_user_fbids',x.slice(0,u-1)).setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI();aa=h.create(aa,this.props.feedback.actorforpost);var ba=o.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI();ba=h.create(ba,this.props.feedback.actorforpost);var ca=n.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI();ca=h.create(ca,this.props.feedback.actorforpost);return (j.createElement('a',{ajaxify:ba,className:"_51kn",'data-hover':'tooltip','data-tooltip-uri':aa,href:ca,rel:'dialog'},j.createElement(k,{height:v,src:y.thumbSrc,width:v}),j.createElement('span',null,z)));};w.prototype.render=function(){'use strict';var x=r(l.ROW,"_51ko"+(this.props.feedback.reactioncount>=u?' '+"_1w2m":'')+(this.props.isFirstComponent?' '+"UFIFirstComponent":'')+(this.props.isLastComponent?' '+"UFILastComponent":''));return (j.createElement('li',{className:x},this.renderFacepile(),this.renderMoreLink()));};f.exports=w;},null);
__d('UFIReactionsMenu.react',['React','UFIReactionsDialogLayer.react','UFIReactionIcon.react','UFIReactionTypes','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=h.Component;n=m&&m.prototype;Object.assign(o,m);o.prototype=Object.create(m.prototype);o.prototype.constructor=o;o.__superConstructor__=m;function o(p,q){'use strict';n.constructor.call(this);this.state={};}o.prototype.onBlur=function(event){'use strict';this.props.onBlur&&this.props.onBlur(event);};o.prototype.onClick=function(p,event){'use strict';event.preventDefault();this.props.onClick&&this.props.onClick(p,event);};o.prototype.render=function(){'use strict';var p=k.ordering.map((function(q){if(!k.reactions[q])return null;q=parseInt(q+'',10);return (h.createElement('a',{className:"_iuw",href:'#',key:'reaction_'+q,onBlur:this.onBlur.bind(this),onClick:this.onClick.bind(this,q)},h.createElement('div',{className:"_d6k"},h.createElement(j,{className:"_iuz",reaction:q,size:'medium'}),h.createElement('div',{className:"_d6l"},h.createElement('div',{className:"_4sm1"},k.reactions[q].display_name)))));}).bind(this)).filter(function(q){return q;});return (h.createElement(i,{context:this.props.context,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,shown:this.props.shown},h.createElement('div',{className:"_iu-"},p)));};f.exports=o;},null);
__d('UFIReactionsLink.react',['BanzaiLogger','Event','InlineBlock.react','React','ReactLayeredComponentMixin','UFIConstants','UFIReactionIcon.react','UFIReactionsMenu.react','UFIReactionTypes','UFIUserActions','classWithMixins','cx','getActiveElement','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=Object.assign||function(ea){for(var fa=1;fa<arguments.length;fa++){var ga=arguments[fa];for(var ha in ga)if(Object.prototype.hasOwnProperty.call(ga,ha))ea[ha]=ga[ha];}return ea;},w,x,y,z,aa=true,ba=500,ca=250;w=r(k.Component,u(l));x=w&&w.prototype;Object.assign(da,w);da.prototype=Object.create(w.prototype);da.prototype.constructor=da;da.__superConstructor__=w;function da(ea,fa){'use strict';x.constructor.call(this);this.hideDialog=this.hideDialog.bind(this);this.showDialog=this.showDialog.bind(this);this.dialogShownTime=0;this.state={dialogShown:false,reaction:ea.reaction};if(!y&&!z){y=i.listen(window,'blur',(function(){this.focusHandlerLock=true;aa=false;}).bind(this));z=i.listen(window,'focus',(function(){aa=true;if(t()!==k.findDOMNode(this.refs.trigger))this.focusHandlerLock=false;}).bind(this));}}da.prototype.componentWillReceiveProps=function(ea){'use strict';this.setState({reaction:ea.reaction});};da.prototype.renderLayers=function(){'use strict';if(!this.state.dialogShown)return null;return {ufiReactionsPopover:k.createElement(o,{context:k.findDOMNode(this.refs.root),onBlur:this.onBlur.bind(this),onClick:this.onReactionChange.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),selected:this.state.reaction,shown:this.state.dialogShown})};};da.prototype.hideDialog=function(){'use strict';this.$UFIReactionsLink1(this.state.reaction);clearTimeout(this.hoverTimeout);this.setState({dialogShown:false});};da.prototype.showDialog=function(){'use strict';if(this.dialogShownTime===0)this.dialogShownTime=Date.now();clearTimeout(this.hoverTimeout);this.setState({dialogShown:true});};da.prototype.onReactionChange=function(ea,event){'use strict';this.$UFIReactionsLink1(ea);q.changeReaction(this.props.id,ea,{target:event.target});this.hideDialog();};da.prototype.onBlur=function(event){'use strict';if(!k.findDOMNode(this.refs.root).contains(t())&&!k.findDOMNode(this.refs.root).contains(event.relatedTarget))this.hideDialog();};da.prototype.onMouseEnter=function(event){'use strict';if(!aa)return;clearTimeout(this.hoverTimeout);this.hoverTimeout=setTimeout(this.showDialog,ba);};da.prototype.onMouseLeave=function(event){'use strict';if(!aa)return;clearTimeout(this.hoverTimeout);this.hoverTimeout=setTimeout(this.hideDialog,ca);};da.prototype.onFocus=function(event){'use strict';if(!this.focusHandlerLock)this.showDialog();this.focusHandlerLock=false;};da.prototype.setFocusHandlerLock=function(ea){'use strict';this.focusHandlerLock=ea;};da.prototype.renderTrigger=function(){'use strict';var ea={onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),onMouseDown:this.setFocusHandlerLock.bind(this,true),onMouseUp:this.setFocusHandlerLock.bind(this,false),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),ref:'trigger'};if(!this.state.reaction||this.state.reaction===m.LikeReaction||!p.reactions[this.state.reaction]){var fa=k.Children.only(this.props.children);return k.cloneElement(fa,Object.assign(v({onClick:(function(event){this.hideDialog();fa.props.onClick(event);}).bind(this)},ea)));}return (k.createElement('a',v({className:"UFILikeLink UFILinkBright",href:'#',onClick:this.onReactionChange.bind(this,0)},ea),k.createElement(n,{className:"_1ktw",reaction:this.state.reaction,size:'tiny'}),p.reactions[this.state.reaction].display_name));};da.prototype.render=function(){'use strict';return (k.createElement(j,{className:'uiContextualLayerParent',ref:'root'},this.renderTrigger()));};da.prototype.$UFIReactionsLink1=function(ea){'use strict';if(this.dialogShownTime!==0){h.log('UserReactionsLoggerConfig',{feedback_id:this.props.id,final_reaction:ea,initial_reaction:this.state.reaction,'interface':'www',time_spent:Date.now()-this.dialogShownTime});this.dialogShownTime=0;}};f.exports=da;},null);
__d('UFIReactionsTokens.react',['ActorURI','React','Image.react','UFIConstants','UFIReactionIcon.react','UFIReactionTypes','URI','XUFICommentTooltipController','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController','XUFIReactionTooltipController','XUFIShareTooltipController','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w,x;w=i.Component;x=w&&w.prototype;Object.assign(y,w);y.prototype=Object.create(w.prototype);y.prototype.constructor=y;y.__superConstructor__=w;function y(z,aa){'use strict';x.constructor.call(this);this.state={hidden:{}};}y.prototype.componentDidMount=function(){'use strict';this.componentDidMountOrUpdate();};y.prototype.componentDidUpdate=function(){'use strict';this.componentDidMountOrUpdate();};y.prototype.componentWillReceiveProps=function(z){'use strict';if(z.feedback.reactioncount!==this.props.feedback.reactioncount)this.setState({hidden:{}});};y.prototype.componentDidMountOrUpdate=function(){'use strict';var z,aa;if(this.refs.tokens.scrollWidth>this.refs.root.offsetWidth)for(var ba=m.ordering.length;ba>0;ba--){z=m.ordering[ba-1];aa=this.refs['token-'+z];if(aa&&!this.state.hidden[z]){var ca=Object.create(this.state.hidden);ca[z]=true;this.setState({hidden:ca});break;}}};y.prototype.getHasBlingText=function(){'use strict';return this.props.contextArgs.hasReactionsTokensBling;};y.prototype.getDialogURI=function(z){'use strict';var aa=q.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier);if(z)aa.setEnum('reaction_type',z);return h.create(aa.getURI(),this.props.feedback.actorforpost);};y.prototype.getPageURI=function(){'use strict';return h.create(p.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);};y.prototype.renderEllipsis=function(){'use strict';if(!Object.keys(this.state.hidden).length)return null;var z=this.getHasBlingText(),aa=z?16:18,ba=z?v('images/ufi/reactions/tokens/ellipsis-small.png'):v('images/ufi/reactions/tokens/token-ellipsis.png');return (i.createElement('a',{ajaxify:this.getDialogURI(),'aria-label':u._("See who reacted to this"),className:"_3_vg _3emk _3t52",href:this.getPageURI(),rel:'dialog'},i.createElement(j,{className:"_4-op",height:aa,src:ba,width:aa})));};y.prototype.renderLikes=function(){'use strict';if(this.getHasBlingText()||!this.props.feedback.reactioncountmap[k.LikeReaction]['default'])return null;return this.renderToken(k.LikeReaction);};y.prototype.renderComments=function(){'use strict';if(!this.props.commentCount)return null;var z=isNaN(this.props.feedback.commentcountreduced)?this.props.feedback.commentcountreduced:this.props.commentCount,aa=u._({"Comment":"{count} Comment","Comments":"{count} Comments"},[u.param('count',z),u['enum'](this.props.commentCount===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]),ba=h.create(o.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost),ca=this.getHasBlingText();return (i.createElement('a',{'aria-label':ca?null:aa,className:"_3_vg"+(!ca?' '+"_3emk":'')+(!ca?' '+"_3emm":''),'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-uri':ba,href:this.props.permalink,onClick:this.props.onCommentClick,rel:'ignore'},ca?aa:z));};y.prototype.renderShares=function(){'use strict';if(!this.props.feedback.sharecount)return null;var z=new n('/ajax/shares/view').setQueryData({target_fbid:this.props.feedback.targetfbid});z=h.create(z,this.props.feedback.actorforpost);var aa=new n('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedback.targetfbid});aa=h.create(aa,this.props.feedback.actorforpost);var ba=h.create(s.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost),ca=u._({"Share":"{count} Share","Shares":"{count} Shares"},[u.param('count',this.props.feedback.sharecountreduced),u['enum'](this.props.feedback.sharecount===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]),da=this.getHasBlingText();return (i.createElement('a',{ajaxify:z,'aria-label':da?null:ca,className:"_3_vg"+(!da?' '+"_3emk":'')+(!da?' '+"_3emn":''),'data-hover':'tooltip','data-tooltip-uri':ba,href:aa,rel:'dialog'},da?ca:this.props.feedback.sharecountreduced));};y.prototype.renderTokens=function(){'use strict';var z=m.ordering.map((function(aa){if(this.state.hidden[aa]||!this.getHasBlingText()&&aa===k.LikeReaction||!m.reactions[aa]||!this.props.feedback.reactioncountmap[aa]['default'])return null;return this.renderToken(aa);}).bind(this));return z;};y.prototype.renderToken=function(z){'use strict';var aa=h.create(r.getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).setEnum('reaction_type',z).getURI(),this.props.feedback.actorforpost);return (i.createElement('a',{ajaxify:this.getDialogURI(z),className:"_3_vg _3emk",'data-hover':'tooltip','data-tooltip-uri':aa,href:this.getPageURI(),key:'reactionType-'+z,ref:'token-'+z,rel:'dialog'},i.createElement(l,{className:"_4-op",reaction:z,size:this.getHasBlingText()?'16':'small'}),this.props.feedback.reactioncountmap[z].reduced));};y.prototype.renderViews=function(){'use strict';var z=this.props.contextArgs.viewCount;if(!z)return null;var aa=u._({"*":{"View":"{count} View","Views":"{count} Views"}},[u.param('count',z,[0]),u['enum'](this.props.feedback.sharecount===1?'View':'Views',{View:'View',Views:'Views'})]),ba=u._({"View":"{count} View","Views":"{count} Views"},[u.param('count',this.props.contextArgs.viewCountReduced),u['enum'](this.props.feedback.sharecount===1?'View':'Views',{View:'View',Views:'Views'})]),ca=this.getHasBlingText();return (i.createElement('span',{'aria-label':aa,'data-hover':'tooltip','data-tooltip':aa,className:"_3_vg"+(!ca?' '+"_3emk":'')+(!ca?' '+"_3mju":'')},ca?ba:this.props.contextArgs.viewCountReduced));};y.prototype.render=function(){'use strict';var z=this.getHasBlingText();return (i.createElement('div',{className:"_3t53"+(z?' '+"_3_vh":''),ref:'root'},i.createElement('div',{className:"_3t54",ref:'tokens'},i.createElement('div',{className:(z?"_3_vi":'')+(!z?' '+"_3_vj":'')},this.renderLikes(),this.renderComments(),this.renderShares(),this.renderViews()),this.renderTokens(),this.renderEllipsis())));};f.exports=y;},null);